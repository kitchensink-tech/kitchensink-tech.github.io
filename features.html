<!DOCTYPE HTML><html><head><meta charset="utf-8"><meta name="viewport" content="with=device-width, initial-scale=1.0"><title>The Kitchen Sink Blog Generator - Features list</title><meta name="author" content="Lucas DiCioccio"><meta name="keywords" content="haskell, authoring articles, static-site generators, design"><meta name="description" content="This article lists the main features of Kitchen Sink. We do not really compare it to the vast amount of other static-site generators."><meta name="twitter:card" content="summary"><meta name="twitter:title" content="The Kitchen Sink Blog Generator - Features list"><meta name="twitter:site" content="@lucasdicioccio"><meta name="twitter:creator" content="@lucasdicioccio"><meta property="twitter:description" content="This article lists the main features of Kitchen Sink. We do not really compare it to the vast amount of other static-site generators."><meta name="type" property="og:type" content="article"><meta name="title" property="og:title" content="The Kitchen Sink Blog Generator - Features list"><meta name="url" property="og:url" content="https://kitchensink-tech.github.io/features.html"><meta property="og:description" content="This article lists the main features of Kitchen Sink. We do not really compare it to the vast amount of other static-site generators."><meta name="ks:article_json" content="/json/features.cmark.json"><meta name="article:tag" content="haskell"><meta name="article:tag" content="authoring articles"><meta name="article:tag" content="static-site generators"><meta name="article:tag" content="design"><style>@import "/css/dev.css";@import "/css/colors.css";@import "/css/article.css";@import "/css/navigation.css";section:not(:first-of-type) {  border-left: 2px solid black;  padding-left: 1em;}#histogram {  height: 400px;}code {  color: darksalmon;  font-weight: bold;}code.language-console {  color: darkgreen;  font-weight: initial;}.op {  color: rebeccapurple;}.dt {  color: violet;}.cf {  color: red;}</style></head><body><nav id="site-navigation" class="nav"><a href="/">home</a><div id="search-box"><script type="text/javascript" src="/js/search-box.js" async></script></div></nav><div class="main"><article><header class="heading"><h1>Features list</h1><p>By <a href="https://twitter.com/lucasdicioccio">@lucasdicioccio</a>, 1155 words, 15 links, 2images.</p><div class="taglist"><div class="tag"><a class="tag-link" href="/topics/haskell.html"><span class="tag-name">haskell</span><span class="tag-count">5</span></a></div><div class="tag"><a class="tag-link" href="/topics/authoring-articles.html"><span class="tag-name">authoring articles</span><span class="tag-count">4</span></a></div></div></header><div class="main-article"><section class="main-section"><p>Kitchen-Sink consists of two related components:</p>
<ul>
<li>i. a set of <em>libraries</em> (at the time of writing, everything is packed in a single library: it‚Äôs a kitchen sink afterall)
</li>
<li>ii. a default <em>executable</em> which uses defaults from the library
</li>
</ul>
<p>The library allows you to write a program to author websites from content
thrown into a folder. The name Kitchen-Sink comes from the fact that Kitchen
Sink is meant to work with a single folder having no particular organization
besides filenames.</p>
<p>The executable imports the library to demonstrates and implements a
blog-generator generating HTML having a default layout (for this very website
for instance).  Thus, as a Kitchen-Sink user you could either run the
executable directly (if you want a website that looks like this one for
instance) or write your own executable from the library.</p>
<p>When we refer to <em>the Kitchen Sink engine</em> or <em>the blog engine</em>, we thus refer
to features available from the libary. As of this writing, however, I have yet
to finish modularizing all these features. However, the following sections
provide a listing of features with a good overall structure of what could go in
which libraries.</p>
</section><section class="main-section"><h2 id="command-line-single-run-mode">command-line single-run mode</h2>
<p>The default executable can run as a one-off generator command.  The intended
use-case if for generating websites as part of automated pipelines. There is
nothing really exciting about the command-line single-run mode.</p>
<p>Example usage with the default executable:</p>
<p><code>kitchen-sink produce --srcDir website-src --outDir website-www</code></p>
<pre><code class="language-console">Loading (LoadArticle &quot;website-src/features.cmark&quot;)
Loading (EvalSection &quot;website-src/features.cmark&quot; BuildInfo Json)
Loading (EvalSection &quot;website-src/features.cmark&quot; Preamble Json)
Loading (EvalSection &quot;website-src/features.cmark&quot; Topic Json)
Loading (EvalSection &quot;website-src/features.cmark&quot; Social Json)
Loading (EvalSection &quot;website-src/features.cmark&quot; MainCss Css)
Loading (EvalSection &quot;website-src/features.cmark&quot; Summary Cmark)
Loading (EvalSection &quot;website-src/features.cmark&quot; MainContent Cmark)
Loading (EvalSection &quot;website-src/features.cmark&quot; MainContent Cmark)
[...]
Assembling &quot;website-www/features.html&quot;
Assembling &quot;website-www/topics/modding.html&quot;
Assembling &quot;website-www/topics/philosophy.html&quot;
Assembling &quot;website-www/topics/sections.html&quot;
[...]
Generating &quot;website-www/json/paths.json&quot;
Generating &quot;website-www/json/filecounts.json&quot;
Generating &quot;website-www/json/topicsgraph.json&quot;
Generating &quot;website-www/json/features.cmark.json&quot;
Generating &quot;website-www/json/philosophy.cmark.json&quot;
[...]
</code></pre>
<p>These logs indicate that files where sourced in the <code>website-src</code> directory,
then computation occured, and finally files where output in the <code>website-www</code>
directory. You can navigate with a browser in this directory. However when
authoring articles it is pretty annoying to do manual refreshes. Instead,
Kitchen-Sink incorporates a server able to directly serve the same content as
it generates.</p>
</section><section class="main-section"><h2 id="server-mode">server-mode</h2>
<p>One key reason for having written Kitchen-Sink is to explore things that makes
my life easy. Among these: live</p>
<h3 id="live-serving">live-serving</h3>
<p>Rather than generating all the website once, Kitchen-Sink can run an HTTP
server that will directly return the results of the output targets <em>on the
fly</em>.  That is, each time a web-browser navigates, the latest value for a given
route is shown to the browser. This is not especially useful but can come handy.</p>
<p>Example usage with the default executable:</p>
<p><code>$ kitchen-sink serve --srcDir website-src --outDir website-www --servMode SERVE --port 7654</code></p>
<pre><code class="language-console">[...]
SiteReloaded (Init ())
SiteReloaded RunStart
TargetRequested &quot;/features.html&quot;
TargetBuilt &quot;/features.html&quot; 10079
GET /features.html
  Params: [(&quot;server-id&quot;,&quot;ca231c17-35c9-4060-b4f4-c0dd574dd325&quot;)]
  Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,*/*;q=0.8
  Status: 200 OK 0.029790833s
TargetRequested &quot;/js/search-box.js&quot;
TargetBuilt &quot;/js/search-box.js&quot; 260790
GET /js/search-box.js
  Accept: */*
  Status: 200 OK 0.000694164s
</code></pre>
<h3 id="auto-reload">auto-reload</h3>
<p>The executable server has a special API route with a mechanism to wait for changes
of source files on the file-system.  We also bundle a <a href="/js/autoreload.js">small JavaScript</a> that
subscribes to changes and reload the page on a change. This JavaScript gets
injected in the layout only in dev-server mode. This setup allows to auto-reload on change.</p>
<video width="640" height="480" controls>
  <source src="/videos/auto-reload-002-liveedit.webm" type="video/webm">
  <source src="/videos/auto-reload-002-liveedit.mp4" type="video/mp4">
</video>
<p>To use the dev-server mode, use <code>--servMode DEV</code>. That is, the full-command to run with the default executable is:</p>
<p><code>kitchen-sink serve --srcDir website-src --outDir website-www --servMode DEV --port 7654</code></p>
<h3 id="one-time-commands">one-time commands</h3>
<p>In addition to the above auto-reload script. The default executable‚Äôs layout insert some buttons to get one-click.</p>
<ul>
<li>the <code>produce</code> button will regenerate the whole HTML output
</li>
<li>the <code>publish</code> button will call the <code>publishScript</code> command in the <a href="/kitchen-sink-dot-json.html">kitchen-sink.json file</a> . As a data-point, I use <a href="/gen/out/features.cmark__cat-publish-script">this publish-script</a> for this documentation site.
</li>
</ul>
<h3 id="its-just-a-webserver-library">it‚Äôs just a webserver library</h3>
<p>I‚Äôve not really explored this avenue, but it should be possible to incorporate
the webserver logic in most Haskell web-applications (e.g., your
web-application could run an API and Kitchen-Sink could run some documentation
pages aside).</p>
<h3 id="server-metrics">server metrics</h3>
<p>Why not? to build the webserver-library I‚Äôve used some set of <a href="https://github.com/lucasdicioccio/prodapi">curated and
bundled libraries named ProdAPI</a>.
Which means the server inherits a number of features; among which a number of
<a href="https://prometheus.io/">Prometheus counters</a>. An example set of metrics is
available on <a href="/gen/out/features.cmark__gen-local-server-metrics.txt">this
extract</a>. Thus, rather
than bragging how much Kitchen-Sink is fast, you get to see for yourself
directly (e.g., with the <code>blog_fullbuild_time</code> counters in the Prometheus
summary). Other usages would be to track how fast you add content to articles
by collecting and storing the counters. For instance, this is a timeseries of
me editing this paragraph in live thanks to <a href="https://lucasdicioccio.github.io/prometheus-monitor.html">a Firefox extension I
built</a>.</p>
<p><img src="/images/features-001-targetsizes-timeseries.png" alt="a timeseries graph showing the blog_targets_sizes prometheus counter" /></p>
</section><section class="main-section"><h2 id="article-authoring">article authoring</h2>
<p>Writing articles is the most important thing of a static-site generator.  The
<a href="/philosophy.html">Kitchen-Sink Philosophy</a> here is to throw everything in one
file. The key, and probably somewhat unique aspect of Kitchen-Sink is to
propose writing articles, tune their CSS, provide tags, add generators and so
on directly in the same source file.</p>
<h3 id="the-section-based-format">the section-based format</h3>
<p>The so-called section-based format has a <a href="/sections.html">dedicated article</a> to
document specific mechanism.  In this article we merely show-off <a href="/gen/out/features.cmark__cat-features-cmark">the source
for this article</a> to get an
impression of what writing <em>meaty content</em> entails.</p>
<h3 id="tunable-css-per-page">tunable CSS per page</h3>
<p>Among sections worth a ‚Äúfeature‚Äù label, a special section drives the
inlined-CSS of individual articles. In short, each article can have its own CSS
file.  I found that especially useful when I need to add some rules only for a
given article (e.g., alternating figure alignments) or when I want to host a
single-page JavaScript-app on an article only.  Thus, you should use <code>@import</code>
directives for CSS modularization and re-use across pages.  You do not lose
much in expressivity, a bit in performance, but you gain a lot in flexibility.</p>
<h3 id="commonmark-as-main-input-articles">CommonMark as main input articles</h3>
<p>Writing articles is mostly done in <a href="https://commonmark.org/">CommonMark</a>. That
is, the <em>meaty content</em> and some advanced analyses are based on CommonMark.</p>
<p>Besides the basics for headings, links, raw-HTML, <em>emphasis</em>, <strong>boldness</strong>, and <code>code</code>.
A number of extensions and additional extensions are enabled.</p>
<h4 id="emojis-eyes">emojis <span class="emoji" data-emoji="eyes">üëÄ</span></h4>
<p>Adding emojis is a way to incorporate some emotions in written-web content.
The list of <code>:emoji-codes:</code> is available <a href="https://gist.github.com/rxaviers/7360908"><span class="emoji" data-emoji="arrow_right">‚û°Ô∏è</span> here <span class="emoji" data-emoji="arrow_left">‚¨ÖÔ∏è</span></a> <span class="emoji" data-emoji="fire">üî•</span>.</p>
<h4 id="delimited-blocks-divs-with-attributes">delimited blocks divs with attributes</h4>
<p>Which allow to add some CSS classes, and HTML identifiers</p>
<p>For instance:</p>
<pre><code>::: {.todo #smalldiv}
  add something
:::
</code></pre>
<p>generates the following code</p>
<div class="sourceCode"><pre class="sourceCode"><code class="sourceCode"><span id="1"><a href="#1" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;div</span> <span class="er">id</span><span class="ot">=</span><span class="st">&quot;smalldiv&quot;</span> <span class="er">class</span><span class="ot">=</span><span class="st">&quot;todo&quot;</span><span class="kw">&gt;</span></span>
<span id="2"><a href="#2" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;p&gt;</span>add something<span class="kw">&lt;/p&gt;</span></span>
<span id="3"><a href="#3" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;/div&gt;</span></span></code></pre></div><p>which can then be styled in CSS.</p>
<h4 id="syntax-highlighting-with-skylighting">syntax highlighting with <code>skylighting</code></h4>
<p>Code-blocks are analyzed by <a href="https://github.com/jgm/skylighting">skylighting</a>,
which tokenize code and wraps resulting code with HTML tags having some
well-defined classes for styling in CSS.</p>
<div class="sourceCode"><pre class="sourceCode"><code class="sourceCode"><span id="1"><a href="#1" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">int</span> argc<span class="op">,</span> <span class="dt">char</span><span class="op">**</span> argv<span class="op">)</span> <span class="op">{</span></span>
<span id="2"><a href="#2" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="3"><a href="#3" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div><p>Overall I found that skylighting does the job and since the library requires no
extra JavaScript on the resulting website or external-dependencies at
code-generation time: it‚Äôs good.</p>
<h3 id="generate-images-from-dot">generate images from <code>.dot</code></h3>
<p>There is a special room in my heart for <a href="https://graphviz.org/">GraphViz</a> <span class="emoji" data-emoji="heart">‚ù§Ô∏è</span>. I use it a lot to render diagrams and illustrate simple ideas. Thus I found natural to add some special support for files with the <code>.dot</code> extensions.</p>
<p><img src="/gen/images/features-002-dot-demo.dot.png" alt="all in the kitchen-sink" /></p>
<p>Coupled with <a href="#auto-reload">auto-reload</a>, GraphViz-made diagrams work well
enough to edit technical articles without ever leaving my editor as illustrated in the following video:</p>
<video width="640" height="480" controls>
  <source src="/videos/auto-reload-001-dot.mp4" type="video/mp4">
  <source src="/videos/auto-reload-001-dot.webm" type="video/webm">
</video>
<h3 id="copies-other-images-css">copies other images, css</h3>
<p>An article often comes with extra medias. Images (with <code>jpeg</code>, <code>png</code>
extensions), JavaScript (<code>.js</code>) and CSS (<code>.css</code>) files are copied and moved to
their own target at known location.  That is, KitchenSink wants everything in a
directory but applies rule so that you get something a bit cleaner in return,
isn‚Äôt it awesome?</p>
</section><section class="main-section"><h2 id="content-generation">content-generation</h2>
<h3 id="embedded-data">embedded data</h3>
<h3 id="microscriptable-in-dhall">microscriptable in Dhall</h3>
<h3 id="command-based-generators">command-based generators</h3>
</section><section class="main-section"><h2 id="article-organization">article organization</h2>
<h3 id="article-summaries">article summaries</h3>
<h3 id="social-links">social links</h3>
<h3 id="open-graph-and-twitter-card-metas">open-graph and twitter-card metas</h3>
<h3 id="special-support-for-dotfiles">special-support for dotfiles</h3>
<h3 id="categories-using-tags">categories using tags</h3>
</section><section class="main-section"><h2 id="content-analysis">content-analysis</h2>
<h3 id="site-listing-and-search-box">site listing and search-box</h3>
<h3 id="wordcounts">wordcounts</h3>
<h3 id="sitemap-graph">sitemap graph</h3>
<h3 id="article-skylines">article skylines</h3>
<div id="histogram">
</div>
<script src="/js/echarts.min.js"></script>
<script src="/js/echart-histogram.js"></script>
</section></div><footer class="footing"><div class="social-links"><a href="https://twitter.com/lucasdicioccio">twitter: @lucasdicioccio</a><a href="https://github.com/lucasdicioccio">github: lucasdicioccio</a><a href="https://linkedin.com/in/lucasdicioccio">linkedin: lucasdicioccio</a></div></footer></article></div></body></html>