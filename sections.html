<!DOCTYPE HTML><html><head><meta charset="utf-8"><meta name="viewport" content="with=device-width, initial-scale=1.0"><title>The Kitchen Sink Blog Generator - The section-based format</title><link rel="icon" type="image/x-icon" href="/images/favicon.png"><link rel="alternate" type="application/atom+xml" title="Atom Feed" href="https://kitchensink-tech.github.io/atom.xml"><meta name="author" content="Lucas DiCioccio"><meta name="keywords" content="authoring articles, how-to, sections, static-site generators, design"><meta name="description" content="Writing articles in KitchenSink requires to write text files with a specific format called the section-based authoring format. A section-based format consists of delimited sections of text. Sections either configure the page (e.g., the tile of the page) or provide _meaty content_ for readers to read.  This article describes the section-based format and sections available to write articles."><meta name="twitter:card" content="summary"><meta name="twitter:title" content="The Kitchen Sink Blog Generator - The section-based format"><meta name="twitter:site" content="@lucasdicioccio"><meta name="twitter:creator" content="@lucasdicioccio"><meta property="twitter:description" content="Writing articles in KitchenSink requires to write text files with a specific format called the section-based authoring format. A section-based format consists of delimited sections of text. Sections either configure the page (e.g., the tile of the page) or provide _meaty content_ for readers to read.  This article describes the section-based format and sections available to write articles."><meta name="type" property="og:type" content="article"><meta name="title" property="og:title" content="The Kitchen Sink Blog Generator - The section-based format"><meta name="url" property="og:url" content="https://kitchensink-tech.github.io/sections.html"><meta property="og:description" content="Writing articles in KitchenSink requires to write text files with a specific format called the section-based authoring format. A section-based format consists of delimited sections of text. Sections either configure the page (e.g., the tile of the page) or provide _meaty content_ for readers to read.  This article describes the section-based format and sections available to write articles."><meta name="ks:article_json" content="/json/sections.cmark.json"><meta name="article:tag" content="authoring articles"><meta name="article:tag" content="how-to"><meta name="article:tag" content="sections"><meta name="article:tag" content="static-site generators"><meta name="article:tag" content="design"><style>@import "/css/dev.css";@import "/css/colors.css";@import "/css/article.css";@import "/css/navigation.css";pre {  border-left: 4px double coral;  margin-left: 1em;  padding-left: 1em;}h2 {  padding: 0.2rem 0.2rem 0.2rem 1em;  margin-bottom: 0;  border-radius: 6px 0 0 0;  background: salmon;  color: white;  font-family: monospace;}.section-details {  padding: 2rem;  border-left: 8px solid salmon;}</style></head><body><nav id="site-navigation" class="nav"><a href="/">home</a><div id="search-box"><script type="text/javascript" src="/js/search-box.js" async></script></div></nav><div class="main"><article><header class="heading"><h1>The section-based format</h1><p>By <a href="https://twitter.com/lucasdicioccio">@lucasdicioccio</a>, 1558 words, 1 code snippets, 3 links, 0images.</p><div class="topiclist"><div class="topic"><a class="topic-link" href="/topics/authoring-articles.html"><span class="topic-name">authoring articles</span><span class="topic-count">2/4</span></a><div class="topic-prevnext"><span class="topic-prev-link"><a href="/getting-started.html">[prev]</a></span><span class="topic-next-link"><a href="/other-formats.html">[next]</a></span></div></div><div class="topic"><a class="topic-link" href="/topics/how-to.html"><span class="topic-name">how-to</span><span class="topic-count">3/3</span></a><div class="topic-prevnext"><span class="topic-prev-link"><a href="/getting-started.html">[prev]</a></span><span class="topic-next-link"></span></div></div><div class="topic"><a class="topic-link" href="/topics/sections.html"><span class="topic-name">sections</span><span class="topic-count">2/2</span></a><div class="topic-prevnext"><span class="topic-prev-link"><a href="/sections-dhall.html">[prev]</a></span><span class="topic-next-link"></span></div></div></div></header><div class="main-article"><section class="main-section"><p>In my <a href="https://lucasdicioccio.github.io/how-this-blog-works.html">first article about why I wrote my own
blog-engine</a>, I
introduce an important separation between content and structure of articles. In
short, the <em>meaty content</em> is what readers are interested in, whereas structure
is what readers navigate. You need both meaty content and some structure to
make an article. However, you do not want to alternate switching between the
two to <a href="https://en.wikipedia.org/wiki/Flow_(psychology)">protect your state of
flow</a> while writing.</p>
<p>I grew the section-based format out of frustration using blogs that require
templates with partials and special directory listings: I always felt like the
added structure did not bring much. The key idea here is to put as much
information in a same file as possible and just drop all files in a same
directory (it’s a kitchen-sink after all). From this “minimalist” design,
arises the need to separate big blocks of texts (markdown/commonmark) from
structural information (json, CSS).  Here comes the section-based format: an
article file consists of multiple sections separated with special line
separators.</p>
<h1 id="section-based-files">Section-based files</h1>
<p>A Section starts with a <code>=</code> followed by a section name (e.g.,
<code>base:main-css.css</code>) and ends with an empty line followed by another section
(or the end of the file).</p>
<p>For instance, a fictional file containing three sections could be</p>
<pre><code>=foo.json
{&quot;a&quot;: 123}

=foobar.css
@import &quot;toto.css&quot;;

=foobar.css
@import &quot;titi.css&quot;;
html{ background: cyan };
</code></pre>
<p>In that case, the three sections would consists of one <code>foo.json</code> with some
JSON object and two <code>foobar.css</code> with some CSS rules.  We note that sections
can be repeated: the section-format itself does not prescibe whether sections
can appear multiple times or whether they are mandatory. It is then the role of
the KitchenSink blog engine to decide whether it makes sense to have such a
structure. For instance, having two paragraphs of texts makes sense, having two
titles may be a stretch.</p>
<p>Alas (fortunately?) KitchenSink <code>foo.json</code> and <code>foobar.css</code> do not exist.
Instead, this article list sections supported by KitchenSink. Modifying the
KitchenSink engine to support new sections is out of scope of this article.
You’ll find plenty of section-based format examples by browsing the
<a href="https://github.com/kitchensink-tech/kitchensink/tree/main/website-src">source-files for this very
website</a>,
KitchenSink names section-based format with the <code>.cmark</code> extension for
convenience (because the meaty-content is written in CommonMark).</p>
<h1 id="supported-sections">Supported sections</h1>
<p>Recall that KitchenSink is both a library and an engine. We describe here
sections when using KitchenSink without tuning. While using KitchenSink as a
library, it should be easy enough to add new sections or new layouts or modify
subtly how Kitchen-Sink interprets some section data.</p>
<p>Thus, the following documentation is descriptive of how the default KitchenSink
engine works. It is not the case that this documentation is prescriptive (i.e.,
you are free to modify any behavior – just avoid confusing your users that may
end up reading this piece of documentation).</p>
<h2 id="build-info-mandatory">build-info [mandatory]</h2>
<div class="section-details">
<p>An important section to let Kitchen-Sink know which <strong>layout</strong> to apply.  Known
layouts are <code>article</code>, <code>index</code> (for <code>index.cmark</code>), <code>glossary</code> (for
<code>glossary.cmark</code>), <code>topics</code> (for <code>topics.cmark</code>), <code>application</code> for JavaScript
single-page apps, <code>gallery</code> for content galleries, and <code>listing</code> for various
listings. Overall, except for index and topics, the layout of content does not
change significantly besides the HTML-nesting (which then allows you to modify
CSS or hijack DOM elements for single-page apps).</p>
<p>The publicationStatus is either: <code>Public</code>, <code>Upcoming</code>, or <code>Archived</code>. Upcoming
and Archived articles are treated slightly differently from Public articles in
listing or in the home page: they are ranked lower and they do not carry a
summary. A warning is also inserted on Upcoming and Archived articles.</p>
<p><strong>example</strong></p>
<pre><code>=base:build-info.json
{&quot;layout&quot;:&quot;article&quot;
,&quot;publicationStatus&quot;:&quot;Public&quot;
}
</code></pre>
</div>
<h2 id="preamble-mandatory">preamble [mandatory]</h2>
<div class="section-details">
<p>Contains bibliographical information such as the title and author of the
article. Optionally, you can add some link to a representative image.</p>
<p>Titles and authors are used throughout where it makes sense.</p>
<p>You can also overload the <a href="https://www.w3.org/2005/10/howto-favicon">favicon</a>
using the <code>faviconUrl</code> JSON key.</p>
<p><strong>example</strong></p>
<pre><code>=base:preamble.json
{&quot;author&quot;: &quot;Lucas DiCioccio&quot;
,&quot;date&quot;: &quot;2022-01-30T12:00:00Z&quot;
,&quot;title&quot;: &quot;The section-based format&quot;
}
</code></pre>
</div>
<h2 id="summary-recommended">summary [recommended]</h2>
<div class="section-details">
<p>Some commonmark to generate a short summary about the article.</p>
<p>The summary is displayed in article listings but also in OpenGraph
and Twitter summaries when people share links on various media.</p>
<p>Also use as HTML Meta header for search engines.</p>
<p>Although the summary is arbitrary CommonMark, you should avoid complexifying it
too much (i.e., stick to emphasis, inlined code, and bold).</p>
<p>You should also keep it short (a few sentences).</p>
<p><strong>example</strong></p>
<pre><code>=base:summary.cmark
A small article about _something_ interesting.
</code></pre>
</div>
<h2 id="topics-recommended">topics [recommended]</h2>
<div class="section-details">
<p>Meta-information for contextualizing the article content.</p>
<p>The representative image is displayed in article listings but also in OpenGraph
and Twitter summaries when people share links on various media.</p>
<ul>
<li>topics: for internally-generated topics labels (for visitors, and for creating series)
</li>
<li>keywords: for HTML meta headers (for search engines)
</li>
</ul>
<p><strong>example</strong></p>
<pre><code>=base:topic.json
{&quot;topics&quot;:[&quot;authoring articles&quot;, &quot;how-to&quot;, &quot;sections&quot;]
,&quot;keywords&quot;:[&quot;static-site generators&quot;, &quot;design&quot;]
,&quot;imageLink&quot;: &quot;/images/some-image.jpeg&quot;
}
</code></pre>
</div>
<h2 id="social-recommended">social [recommended]</h2>
<div class="section-details">
<p>Listing of social-profiles on various sites, will drive the inclusion of links
and some Twitter meta headers.</p>
<p><strong>example</strong></p>
<pre><code>=base:social.json
{&quot;twitter&quot;: &quot;lucasdicioccio&quot;
,&quot;linkedin&quot;: &quot;lucasdicioccio&quot;
,&quot;github&quot;: &quot;lucasdicioccio&quot;
}
</code></pre>
</div>
<h2 id="main-content">main content</h2>
<div class="section-details">
<p>Well, sometimes you have good reason to not have some content. But these
sections are where you should be spending most of your effort.</p>
<p>Sections are inserted in order under <code>&lt;section&gt;</code> html tags.
This fact is important when you are tuning the CSS of your articles (e.g., using CSS <code>nth-*</code> selectors).</p>
<p><strong>example</strong></p>
<pre><code>=base:main-content.cmark

some commonmark
</code></pre>
</div>
<h2 id="taken-off-cmark-good-to-know">taken-off cmark [good-to-know]</h2>
<div class="section-details">
<p>Sometimes you really are taking notes along the way and you want to leave out
some paragraph out of the generated output. For instance you wrote some
paragraph but realized it’s better to keep it around for future articles only.</p>
<p>Such content is merely ignored by KitchenSink when generating the HTML for articles.</p>
<p><strong>example</strong></p>
<pre><code>=base:taken-off.cmark

some content that will not show up in the article
</code></pre>
</div>
<h2 id="css-recommended">CSS [recommended]</h2>
<div class="section-details">
<p>Some CSS block that is inlined in the HTML header. Includes are supported via
the <code>@import</code> CSS directive (note KitchenSink doesn’t interpret the CSS, it
merely defers the <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/@import">import-feature in CSS</a> that web browsers implement).</p>
<p>Most often you’ll <code>@import</code> some repeated CSS for your specific layout and then
tune some rules that match the generated HTML structure and CSS classes you may
have added in your articles.</p>
<p><strong>example</strong></p>
<pre><code>=base:main-css.css
@import &quot;css/colors.css&quot;;
@import &quot;css/article.css&quot;;

h1 {
  margin: auto;
}
</code></pre>
</div>
<h2 id="commands-advanced">commands [advanced]</h2>
<div class="section-details">
<p>Sometimes you want to build content from an external command.  For instance,
you could snapshot the agenda of your favorite music band each time you
generate your blog.</p>
<p>KitchenSink has minimal support for such a scheme. The feature requires to specify</p>
<ul>
<li>a command name (e.g. <code>ping</code>)
</li>
<li>command arguments, arguments are a fixed array (e.g., <code>[&quot;-c&quot;, &quot;3&quot;, &quot;8.8.4.4&quot;]</code>)
</li>
<li>a target name (e.g., <code>latency_to_best_ip</code>)
</li>
</ul>
<p>KitchenSink then reserves the filename <code>/gen/out/&lt;filename.cmark&gt;__&lt;target name&gt;</code> (i.e., <code>/gen/out/sections.cmark__latency_to_best_ip</code> if we were to add
this section in this article) and will execute the command, retrieve the
standard output and put it in the file content.</p>
<p>The main intended use cases are:</p>
<ul>
<li>to generate extra or debugging metadata (e.g., to get the git-hash of the
source repository or the hostname of the machine that built the website)
</li>
<li>to help writing blog articles where you want to “show some code” (which I do
extensively to <code>cat</code> some example source files rather than copying them in the source directory upfront)
</li>
<li>to support funny features (e.g., take a selfie when generating the site)
</li>
</ul>
<p>Keep in mind that you may hit portability issues when switching systems (e.g.,
if you build your website in some automation, the automation need to be able to
execute the commands).</p>
<p><span class="emoji" data-emoji="warning">⚠️</span>
Yes, this section is a bit like a CGI-bin and it opens all sorts of security
risks if you do not know what you are doing.  In particular, do not copy-paste
commands from the Internet without paying close attention.  In future version
of KitchenSink I’ll likely add a flag to ignore this section to reduce security
risks for people who would like to run KitchenSink on external sources.
At this point I assume that KitchenSink users are tech-savvy geeks.</p>
<p><strong>example</strong></p>
<pre><code>=generator:cmd.json
{&quot;cmd&quot;: &quot;ping&quot;
,&quot;args&quot;: [&quot;-c&quot;, &quot;3&quot;, &quot;8.8.4.4&quot;]
,&quot;target&quot;:&quot;latency_to_best_ip&quot;
}
</code></pre>
</div>
<h2 id="dhall-advanced">dhall [advanced]</h2>
<div class="section-details">
<p>There is one difficult design point when statically-generating website is when
we have datasets of repeated structure (e.g., an image list with title, date,
sizes, filepath, preferred corner thickness etc.) and you want to generate some
content on a page in a static form. I touch on this difficult use-case in a <a href="https://lucasdicioccio.github.io/dhall-section-demo.html">past article on my blog</a>.</p>
<p>In this specific case, the section consists of a
<a href="https://dhall-lang.org/">Dhall</a> expression typed so that it returns a page
content.</p>
<p>The returned object must be of <code>Type</code></p>
<pre><code class="language-dhall">{ contents : Text
, format : Text
}
</code></pre>
<p>Where <code>format</code> is either <code>cmark</code> or <code>html</code> and <code>contents</code> is formatted in the
appropriate format. The return type is currently rather primitive and will
likely change in the future. Changes and specifications are tracked in a
<a href="/sections-dhall.html">WIP-page</a>.</p>
<p><strong>example</strong></p>
<pre><code>=base:main-content.dhall

let map =  https://prelude.dhall-lang.org/List/map

let alphabet : List Text =
  [ &quot;Applicative&quot;
  , &quot;Bisiumulation&quot;
  , &quot;Closure&quot;
  , &quot;Distributive&quot;
  , &quot;...&quot;
  ]

let toCmarkListItem = \(v : Text) -&gt; &quot;- ${v}&quot;

let cmarkContents : List Text =
  map Text Text toCmarkListItem alphabet

in
{ contents =  cmarkContents
, format = &quot;cmark&quot;
}
</code></pre>
</div>
<h2 id="glossary-experimental">glossary [experimental]</h2>
<div class="section-details">
<p>Whether its a TLA or some other term, you sometimes want to introduce glossary
terms. KitchenSink has some support for glossary in the form of parsing a
special section and turning that in a series of <code>dl/dt/dd</code> HTML tags towards
the end of the article.</p>
<p>Glossary terms should be repeated across articles and can have diverging
definitions across articles. A consolidated view of glossary terms is built
when the special article <code>glossary.cmark</code> with layout type <code>glossary</code> is
present.</p>
<p>In the future we may modify the  generated HTML to include some glossary-links
directly in the render body of articles or add glossary terms as nodes into the
sitemap.</p>
<p><strong>example</strong></p>
<pre><code>=base:glossary.json
{&quot;glossary&quot;:
  [ {&quot;term&quot;: &quot;KS&quot;, &quot;definition&quot;: &quot;Kitchen Sink&quot;}
  , {&quot;term&quot;: &quot;TLA&quot;, &quot;definition&quot;: &quot;Three-letter acroynym&quot;}
  ]
}
</code></pre>
</div>
<h2 id="embedded-datasets-experimental">embedded datasets [experimental]</h2>
<div class="section-details">
<p>Sometimes you want to ship a dataset. An option is to create one file in the
Kitchen-Sink directory. However naming may conflict, and for very small
examples, sometimes you just want to inline some dataset.</p>
<p>The <code>dataset</code> section addresses such needs, by generating.
<span class="emoji" data-emoji="warning">⚠️</span> The ordering of the insertion determines the resulting filename,
for instance <code>/raw/data/sections.cmark__1.csv</code> for the first dataset in the <code>sections.cmark</code> file.</p>
<p>In the future we will likely create extra metadata information:</p>
<ul>
<li>finding a way to give names to datasets
</li>
<li>computing sha256 signatures of datasets
</li>
<li>inserting some <code>&lt;meta&gt;</code> tags in the HTML <code>head</code> section
</li>
</ul>
<p><strong>example</strong></p>
<pre><code>=base:dataset.csv
foo;bar
a;42
b;51

=base:dataset.json
[{&quot;foo&quot;:&quot;a&quot;, &quot;bar&quot;: 42}
,{&quot;foo&quot;:&quot;b&quot;, &quot;bar&quot;: 51}
]
</code></pre>
</div>
</section></div><dl class="glossary"><dt class="term">KS</dt><dd class="definition">Kitchen Sink</dd><dt class="term">TLA</dt><dd class="definition">Three-letter acroynym</dd></dl><footer class="footing"><div class="social-links"><a href="https://twitter.com/lucasdicioccio">twitter</a><a href="https://github.com/lucasdicioccio">github</a><a href="https://linkedin.com/in/lucasdicioccio">linkedin</a></div></footer></article></div></body></html>